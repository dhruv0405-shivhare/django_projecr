{% extends 'base.html' %}
{% load static %}

{% block title %} index {% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock %}

{% block content %}
<h1 style="text-align: center; margin-top: 5px;">Add New Students</h1>
<div class="container">
    <div class="row">
        <div style="columns: md -12px;">
            <div class="card" style="background-color: lightgrey;">
                <div class="card-body">
                    <form action="{% url 'dashboard' %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div style="columns: md --3px;">
                            <label for="enrollment">Enrollment Number</label>
                        <input type="text" name="enrollment" class="form-control" placeholder="Enter Enrollment Number">
                        </div>

                        <div style="columns: md --3px;">
                            <label for="name">Name</label>
                        <input type="text" name="name" class="form-control" placeholder="Enter Name">
                        </div>
                        <div style="columns: md --3px;">
                            <label for="email">Email</label>
                        <input type="text" name="email" class="form-control" placeholder="Enter Email">
                        <div style="columns: md --3px;">
                            <label for="contact">Contact</label>
                        <input type="text" name="contact" class="form-control" placeholder="Enter Contact">
                        <div style="columns: md --3px;">
                            <label for="address">Address</label>
                        <textarea name="address" rows="5" class="form-control" placeholder="Enter Address"></textarea>
                        </div>
                        <div style="columns: md --3px;">
                        <label for="password">Password</label>
                        <input type="text" name="password" class="form-control" placeholder="Enter Password">
                        <div style="columns: md --3px;">
                        <label for="cpassword">Confirm Password</label>
                        <input type="text" name="cpassword" class="form-control" placeholder="Enter Confirm Password">
                        <div class="container" style="text-align: center; margin-top: 12px;">
                            <button class="btn btn-primary">
                                Add Student
                            </button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
</div>
<br>
<br><br>
<br>
<div class="container" style="margin-top: 20px;"></div>

<table border="1">
    <tr>
        <th>S.No</th>
        <th>Enrollment</th>
        <th>Student Name</th>
        <th>Student Email</th>
        <th>Student Contact</th>
        <th>Student Address</th>
        <th>Edit</th>
        <th>Delete</th>
    </tr>
    {% for i in data %}
    <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ i.stu_enrollment }}</td>
        <td>{{ i.stu_name }}</td>
        <td>{{ i.stu_email }}</td>
        <td>{{ i.stu_contact }}</td>
        <td>{{ i.stu_address }}</td>
        <td><a href="{% url 'edit' pk=i.id %}">Edit</a></td>
        <td><a href="{% url 'delete' pk=i.id %}" onclick="return confirm('Are you sure you want to delete this record?');">Delete</a></td>
    </tr>
    
    {% endfor %}
</table>


{% if data1 %}

    <h3>Update Student Data</h3>
    <form action="{% url 'updatedat' pk=data1.id %}" method="post">
        {% csrf_token %}
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" value="{{ data1.stu_name }}" required><br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" value="{{ data1.stu_email }}" readonly>
        <input type="hidden" name="email" value="{{ data1.stu_email }}"><br>

        <label for="contact">Contact:</label>
        <input type="number" id="contact" name="contact" value="{{ data1.stu_contact }}" required><br>

        <label for="address">Address:</label>
        <input type="text" id="address" name="address" value="{{ data1.stu_address }}" required><br>

        <input type="submit" value="Update">
    </form>
    </div>
{% endif %}
{% endblock %}